import timely from 'timely'

const numberOfAnagrams = (anagrams) => {

  let sortedAnagrams = anagrams.map( x => x.split('').sort().join(''))
                               .reduce( (x, y) => {
                                 if (x.findIndex( z => z.word == y) === -1) {
                                   x.push({"word": y, "count" : 1})
                                 }else {
                                   let pos = x.findIndex( z => z.word == y)
                                   x[pos].count += 1
                                   if(x[pos].count == 2){
                                     x[0].total += 2
                                   }else if (x[pos].count > 2) {
                                     x[0].total += 1
                                   }
                                 }
                                 return x
                               }, [{"total" : 0}])
    return sortedAnagrams[0].total
}


const shortListOfAnagrams = 'acre tyler diel water lied care deil idle race beak deli bake eild'.split(" ")
const longListOfAnagrams = 'asper abmho abohm grieving blah regiving water paresdeltas tyler arced cadre cared cedar raced tyler alerted altered redealt mates schumacher meats steam tames teams related treadle grandiose greened reneged organised desk desalt aster rates notebook phone gatorade laptop girl boy cable lapel rope knife gun joke quinn mac pc xbox deltas desalt lasted salted slated staled resat stare tares tears gramophonic monographic deltas desalt lasted salted slated staled lasted salted slated staled derail dialer laired railed redial relaid parse pears acter caret cater crate react trace rapes reaps spare spear asper abmho abohm grieving regiving water paresdeltas arced cadre cared cedar raced tyler alerted altered redealt mates schumacher meats steam tames teams related treadle grandiose greened reneged organised desk desalt aster rates notebook phone gatorade laptop girl boy cable lapel rope knife gun joke quinn mac pc xbox deltas desalt lasted salted slated staled resat stare tares tears gramophonic monographic deltas desalt lasted salted slated staled lasted salted slated staled derail dialer laired railed redial relaid parse pears acter caret cater crate react trace rapes reaps spare spear asper abmho abohm grieving regiving water paresdeltas arced cadre cared cedar raced tyler alerted altered redealt mates schumacher meats steam tames teams related treadle grandiose greened reneged organised desk desalt aster rates notebook phone gatorade laptop girl boy cable lapel rope knife gun joke quinn mac pc xbox deltas desalt lasted salted slated staled resat stare tares tears gramophonic monographic deltas desalt lasted salted slated staled lasted salted slated staled derail dialer laired railed redial relaid parse pears acter caret cater crate react trace rapes reaps spare spear asper abmho abohm grieving regiving water paresdeltas arced cadre cared cedar raced tyler alerted altered redealt mates schumacher meats steam tames teams related treadle grandiose greened reneged organised desk desalt aster rates notebook phone gatorade laptop girl boy cable lapel rope knife gun joke quinn mac pc xbox deltas desalt lasted salted slated staled resat stare tares tears gramophonic monographic deltas desalt lasted salted slated staled lasted salted slated staled derail dialer laired railed redial relaid parse pears acter caret cater crate react trace rapes reaps spare spear asper abmho abohm grieving regiving water paresdeltas arced cadre cared cedar raced tyler alerted altered redealt mates schumacher meats steam tames teams related treadle grandiose greened reneged organised desk desalt aster rates notebook phone gatorade laptop girl boy cable lapel rope knife gun joke quinn mac pc xbox deltas desalt lasted salted slated staled resat stare tares tears gramophonic monographic deltas desalt lasted salted slated staled lasted salted slated staled derail dialer laired railed redial relaid parse pears acter caret cater crate react trace rapes reaps spare spear asper abmho abohm grieving regiving water paresdeltas arced cadre cared cedar raced tyler alerted altered redealt mates schumacher meats steam tames teams related treadle grandiose greened reneged organised desk desalt aster rates notebook phone gatorade laptop girl boy cable lapel rope knife gun joke quinn mac pc xbox deltas desalt lasted salted slated staled resat stare tares tears gramophonic monographic deltas desalt lasted salted slated staled lasted salted slated staled derail dialer laired railed redial relaid parse pears acter caret cater crate react trace rapes reaps spare spear asper abmho abohm grieving regiving water paresdeltas arced cadre cared cedar raced tyler alerted altered redealt mates schumacher meats steam tames teams related treadle grandiose greened reneged organised desk desalt aster rates notebook phone gatorade laptop girl boy cable lapel rope knife gun joke quinn mac pc xbox deltas desalt lasted salted slated staled resat stare tares tears gramophonic monographic deltas desalt lasted salted slated staled lasted salted slated staled derail dialer laired railed redial relaid parse pears acter caret cater crate react trace rapes reaps spare spear asper abmho abohm grieving regiving water paresdeltas arced cadre cared cedar raced tyler alerted altered redealt mates schumacher meats steam tames teams related treadle grandiose greened reneged organised desk desalt aster rates notebook phone gatorade laptop girl boy cable lapel rope knife gun joke quinn mac pc xbox deltas desalt lasted salted slated staled resat stare tares tears gramophonic monographic deltas desalt lasted salted slated staled lasted salted slated staled derail dialer laired railed redial relaid parse pears acter caret cater crate react trace rapes reaps spare spear asper abmho abohm grieving regiving water paresdeltas arced cadre cared cedar raced tyler alerted altered redealt mates schumacher meats steam tames teams related treadle grandiose greened reneged organised desk desalt aster rates notebook phone gatorade laptop girl boy cable lapel rope knife gun joke quinn mac pc xbox deltas desalt lasted salted slated staled resat stare tares tears gramophonic monographic deltas desalt lasted salted slated staled lasted salted slated staled derail dialer laired railed redial relaid parse pears acter caret cater crate react trace rapes reaps spare spear asper abmho abohm grieving regiving water paresdeltas arced cadre cared cedar raced tyler alerted altered redealt mates schumacher meats steam tames teams related treadle grandiose greened reneged organised desk desalt aster rates notebook phone gatorade laptop girl boy cable lapel rope knife gun joke quinn mac pc xbox deltas desalt lasted salted slated staled resat stare tares tears gramophonic monographic deltas desalt lasted salted slated staled lasted salted slated staled derail dialer laired railed redial relaid parse pears acter caret cater crate react trace rapes reaps spare spear asper abmho abohm grieving regiving water paresdeltas arced cadre cared cedar raced tyler alerted altered redealt mates schumacher meats steam tames teams related treadle grandiose greened reneged organised desk desalt aster rates notebook phone gatorade laptop girl boy cable lapel rope knife gun joke quinn mac pc xbox deltas desalt lasted salted slated staled resat stare tares tears gramophonic monographic deltas desalt lasted salted slated staled lasted salted slated staled derail dialer laired railed redial relaid parse pears acter caret cater crate react trace rapes reaps spare spear asper abmho abohm grieving regiving water paresdeltas arced cadre cared cedar raced tyler alerted altered redealt mates schumacher meats steam tames teams related treadle grandiose greened reneged organised desk desalt aster rates notebook phone gatorade laptop girl boy cable lapel rope knife gun joke quinn mac pc xbox deltas desalt lasted salted slated staled resat stare tares tears gramophonic monographic deltas desalt lasted salted slated staled lasted salted slated staled derail dialer laired railed redial relaid parse pears acter caret cater crate react trace rapes reaps spare spear'.split(" ")

const anagramShortTime = timely(numberOfAnagrams)
const anagramLongTime = timely(numberOfAnagrams)

const shortResult = anagramShortTime(shortListOfAnagrams)
const longResult = anagramLongTime(longListOfAnagrams)

console.log(`SHORT LIST: list length: ${shortListOfAnagrams.length}, anagrams: ${shortResult}, time: ${anagramShortTime.time} ms`)
console.log(`LONG LIST: list length: ${longListOfAnagrams.length}, anagrams: ${longResult}, time: ${anagramLongTime.time} ms`)
